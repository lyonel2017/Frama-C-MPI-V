/** 
 * ParTypes - http://gloss.di.fc.ul.pt/ParTypes
 *
 * An example protocol for a program that computes the
 * heat diffusion equation in one dimension.
 *
 * Adapted from:
 *   FEVS: A Functional Equivalence Verification Suite. 
 *   http://vsl.cis.udel.edu/fevs/index.html
 *
 * Authors: CÃ©sar Santos and Eduardo Marques
 * Version: $Id: diffusion1D.prot 4690 2015-06-24 10:18:56Z edrdo $
 */
protocol diffusion1D {
    broadcast 0 n: {x: positive | x % size = 0} // Number of discrete points, including endpoints
    broadcast 0 numIterations : positive	// Number iterations
    broadcast 0 integer // Write frame every this many time steps
    foreach i: 1 .. size-1
    	message 0 i float[n/size]
    foreach iter: 1 .. numIterations {
    	foreach i: 1 .. size-1
        	message i i-1 float
    	foreach i: 0 .. size-2
        	message i i+1 float
    } 
}
