module MPI_the_protocol

use protocol.MPI_Protocol
use int.Int
use int.EuclideanDivision


let constant the_protocol : protocol =
  (Foreach 0 (size-1) (fun i ->
    (Message i
             (if (i+1) <= (size-1)
              then (i+1)
              else 0)
              ((div 1000000 size)*4) 0 MPI_float)))
end